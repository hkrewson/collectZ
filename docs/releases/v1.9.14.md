# v1.9.14

## Version and date
- Version: `1.9.14`
- Date: `2026-02-23`

## Milestone target and status
- Target: 1.9.14 CSRF defense and release-note policy enforcement
- Status: Completed

## Summary
Added CSRF protection for cookie-authenticated mutating API requests, automated frontend CSRF header handling, enforced release-note checks in CI, and published full release notes for 1.9.0 through 1.9.13.

## What changed
### Backend
- Added CSRF middleware and validation for mutating `/api` routes.
- Added CSRF token issuance endpoint: `GET /api/auth/csrf-token`.
- Issued CSRF token cookie on login/register and cleared it on logout.
- Added CSRF validation failure audit logging.

### Frontend
- Updated API helper to automatically attach `x-csrf-token` for `POST/PUT/PATCH/DELETE`.
- Added fallback token bootstrap call when CSRF cookie is absent.

### Database
- No schema changes.

### Docs/Ops
- Added release notes files for `v1.9.0` through `v1.9.13`.
- Added CI check enforcing release note file presence and required sections.
- Updated policy/roadmap docs for release-note requirements and 1.9.14+ pre-2.0 hardening track.

## Breaking changes
- API mutating requests using cookie auth now require valid CSRF token.

## Environment/config changes
- No new environment variables required.

## Migration and data impact
- No migration changes.
- No data model changes.

## Deployment and verification
1. Rebuild and restart:
   - `docker compose --env-file .env up -d --build`
2. Verify backend health version is `1.9.14` at `/api/health`.
3. Verify CSRF endpoint sets token cookie and returns token JSON.
4. Verify mutating request without CSRF token fails with 403.
5. Verify frontend login/register/library mutations still succeed.

## Rollback guidance
- Revert to previous image tag/version and redeploy.
- No DB rollback required for this release.

## Known issues and follow-up
- Remaining pre-2.0 hardening continues in `1.9.15` through `1.9.20`.
