# v1.9.24

## Version and date
- Version: `1.9.24`
- Date: `2026-02-24`

## Milestone target and status
- Target: 1.9.24 observability and activity triage improvements
- Status: Completed

## Summary
Improved incident triage by adding status/reason-aware activity filtering in API and UI, and documented a UI-first plus SQL-fallback triage workflow.

## What changed
### Frontend
- Expanded `Admin Settings -> Activity` filters:
  - action (exact),
  - entity (exact),
  - user (id/email),
  - status (`2xx`/`4xx`/`5xx` or exact code),
  - reason (contains),
  - date range.
- Added `Apply` and `Clear` actions for deterministic filter execution.
- Activity rows now surface status and reason badges when present.

### Backend
- Extended `/api/admin/activity` query filtering:
  - `status` (`4xx`, `5xx`, exact numeric status, etc),
  - `reason` (ILIKE match against `details.reason`).
- Extended activity search to include `details.status` and `details.reason`.
- Added `details_status` and `details_reason` projection fields to response rows.

### Database
- No schema changes.

### Docs/Ops
- Added `docs/wiki/16-Activity-Triage-Runbook.md` with:
  - UI triage flow,
  - common failure patterns,
  - SQL fallback queries.
- Linked runbook from wiki home.

## Breaking changes
- None.

## Environment/config changes
- No environment variable changes.

## Migration and data impact
- No migrations required.
- No data changes.

## Deployment and verification
1. Rebuild stack:
   - `docker compose --env-file .env up -d --build`
2. Verify version:
   - `/api/health` returns `1.9.24`
3. Verify Activity page:
   - use status/reason filters and confirm filtered results.
4. Optional API check:
   - `/api/admin/activity?status=4xx`
   - `/api/admin/activity?reason=hints_not_allowed_for_role`

## Rollback guidance
- Revert frontend/backend activity filter changes and redeploy previous tag if triage UI causes regressions.
- No DB rollback required.

## Known issues and follow-up
- Activity triage depends on action producers supplying meaningful `details.reason`/`details.status`.
- Additional aggregation dashboards remain future scope.
