# v1.9.23

## Version and date
- Version: `1.9.23`
- Date: `2026-02-24`

## Milestone target and status
- Target: 1.9.23 RBAC regression test pack
- Status: Completed

## Summary
Added an automated RBAC regression gate in CI that validates critical allow/deny authorization paths across ownership, admin-only endpoints, and scope hint enforcement.

## What changed
### Frontend
- No UI behavior changes in this milestone.

### Backend
- Added API-level RBAC regression script:
  - `scripts/rbac-regression-check.js`
- Coverage includes:
  - owner media edit/delete denied to non-owner,
  - owner media edit/delete allowed to owner,
  - admin media override allowed,
  - admin routes denied to non-admin,
  - scope-hint injection denied for non-admin (`hints_not_allowed_for_role`),
  - admin scoped-hint access allowed.

### Database
- No schema changes.

### Docs/Ops
- CI release workflow now includes a required `rbac-regression` job.
- Backend/frontend publish and auto-tag jobs now depend on RBAC regression success.

## Breaking changes
- None.

## Environment/config changes
- No new environment variables.
- CI runs RBAC job in `NODE_ENV=development` with `SESSION_COOKIE_SECURE=false` to allow localhost cookie replay for API checks.

## Migration and data impact
- No migrations required.
- No persistent data changes.

## Deployment and verification
1. Rebuild stack:
   - `docker compose --env-file .env up -d --build`
2. Verify version:
   - `/api/health` returns `1.9.23`
3. Optional local regression run:
   - `docker compose --env-file .env exec -T -e BASE_URL=http://frontend:3000 backend node scripts/rbac-regression-check.js`
4. Verify CI workflow includes and passes `rbac-regression`.

## Rollback guidance
- Revert workflow/script changes and redeploy prior image if RBAC gate introduces false negatives.
- No DB rollback required.

## Known issues and follow-up
- Regression coverage is API-focused and intentionally narrow to critical RBAC paths.
- Additional endpoint-level permission matrices can be expanded in future milestones if needed.
