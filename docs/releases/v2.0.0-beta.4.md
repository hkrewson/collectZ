# v2.0.0-beta.4

## Version and date
- Version: `2.0.0-beta.4`
- Date: `2026-02-28`

## Milestone target and status
- Target milestone: `2.0.0-beta.4`
- Status: Complete
- Focus: identifier-first import stability, dashboard URL state restore, integrations UI polish, and comics type formalization.

## Summary
This milestone closes the beta.4 import quality work and adds UX continuity fixes for dashboard navigation. It also promotes comics from a generic `other` bucket to a first-class `comic_book` media type across API, DB constraints, and UI.

## What changed
- Finalized identifier-first import behavior and observability:
  - identifier precedence for dedupe/match (`isbn`, `ean/upc`, `asin`) before title/year fallback
  - explicit match-mode and enrichment-status fields in import audit output
  - async import summary persistence for audit download.
- Added dashboard state restore via URL:
  - `tab` and `integration` state are restored on reload
  - deep links like `/admin/integrations/tmdb` now resolve to dashboard context.
- Updated Admin Integrations submenu active styling to align with sidebar active-state treatment.
- Added section-aware add defaults in Library:
  - Add form now defaults media type based on selected library section.
- Replaced generic `other` media type with first-class `comic_book`:
  - migration `v24` backfills existing `other` rows to `comic_book`
  - DB check constraint updated
  - frontend nav updated to `Comic Books` section (`library-comics`)
  - backward compatibility mapping preserved for legacy `library-other` links.
- Version metadata aligned to `2.0.0-beta.4` across app metadata and package versions.

## Breaking changes
- `media_type='other'` is migrated to `media_type='comic_book'`.
- Legacy clients posting `other` are normalized to `comic_book` server-side for compatibility.

## Migration and data impact
- New migration applied:
  - `v24` Rename media_type `other` to `comic_book`.
- Data conversion is in-place and non-destructive.

## Deployment and verification
- Redeploy:
  - `docker compose --env-file .env up -d --build`
- Verify:
  - reload retains current dashboard tab and integrations subsection
  - `/admin/integrations/tmdb` opens Integrations with TMDB selected
  - Library -> Comic Books -> Add defaults to `Comic Book`
  - existing records previously typed as `other` appear under Comic Books.

## Rollback guidance
- Roll back to the previous image tag and redeploy.
- If rolling back code that does not support `comic_book`, ensure migration compatibility strategy is applied before long-lived rollback.

## Known issues and follow-up
- Signed-copy metadata (`signed_by`, `signed_role`, `signed_on`, `signed_at`) remains pending for `2.0.0-beta.5`.
- Comic provider import/enrichment (calibre + metadata provider track) remains scoped for `2.0.0-beta.6`.
